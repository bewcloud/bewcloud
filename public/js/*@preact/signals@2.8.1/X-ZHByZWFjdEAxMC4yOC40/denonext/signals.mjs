/* esm.sh - @preact/signals@2.8.1 */
import{Component as F,options as p,isValidElement as E,Fragment as M}from"preact";import{useMemo as v,useRef as $,useEffect as b}from"preact/hooks";import{effect as a,Signal as g,computed as m,signal as A,batch as S}from"@preact/signals-core";import{Signal as K,action as Q,batch as W,computed as X,createModel as Y,effect as Z,signal as ee,untracked as te}from"@preact/signals-core";var U=typeof globalThis<"u"&&!!globalThis.__PREACT_SIGNALS_DEVTOOLS__,y,h,c,k=[],w=[];a(function(){y=this.N})();function s(t,e){p[t]=e.bind(null,p[t]||(()=>{}))}function d(t){if(c){let e=c;c=void 0,e()}c=t&&t.S()}function N({data:t}){let e=C(t);e.value=t;let[n,i]=v(()=>{let o=this,f=this.__v;for(;f=f.__;)if(f.__c){f.__c.__$f|=4;break}let r=m(()=>{let l=e.value.value;return l===0?0:l===!0?"":l||""}),u=m(()=>!Array.isArray(r.value)&&!E(r.value)),_=a(function(){if(this.N=T,u.value){let l=r.value;o.__v&&o.__v.__e&&o.__v.__e.nodeType===3&&(o.__v.__e.data=l)}}),q=this.__$u.d;return this.__$u.d=function(){_(),q.call(this)},[u,r]},[]);return n.value?i.peek():i.value}N.displayName="ReactiveTextNode";Object.defineProperties(g.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:N},props:{configurable:!0,get(){return{data:this}}},__b:{configurable:!0,value:1}});s("__b",(t,e)=>{if(typeof e.type=="string"){let n,i=e.props;for(let o in i){if(o==="children")continue;let f=i[o];f instanceof g&&(n||(e.__np=n={}),n[o]=f,i[o]=f.peek())}}t(e)});s("__r",(t,e)=>{if(t(e),e.type!==M){d();let n,i=e.__c;i&&(i.__$f&=-2,n=i.__$u,n===void 0&&(i.__$u=n=(function(o,f){let r;return a(function(){r=this},{name:f}),r.c=o,r})(()=>{var o;U&&((o=n.y)==null||o.call(n)),i.__$f|=1,i.setState({})},typeof e.type=="function"?e.type.displayName||e.type.name:""))),h=i,d(n)}});s("__e",(t,e,n,i)=>{d(),h=void 0,t(e,n,i)});s("diffed",(t,e)=>{d(),h=void 0;let n;if(typeof e.type=="string"&&(n=e.__e)){let i=e.__np,o=e.props;if(i){let f=n.U;if(f)for(let r in f){let u=f[r];u!==void 0&&!(r in i)&&(u.d(),f[r]=void 0)}else f={},n.U=f;for(let r in i){let u=f[r],_=i[r];u===void 0?(u=x(n,r,_),f[r]=u):u.o(_,o)}for(let r in i)o[r]=i[r]}}t(e)});function x(t,e,n,i){let o=e in t&&t.ownerSVGElement===void 0,f=A(n),r=n.peek();return{o:(u,_)=>{f.value=u,r=u.peek()},d:a(function(){this.N=T;let u=f.value.value;r!==u?(r=void 0,o?t[e]=u:u!=null&&(u!==!1||e[4]==="-")?t.setAttribute(e,u):t.removeAttribute(e)):r=void 0})}}s("unmount",(t,e)=>{if(typeof e.type=="string"){let n=e.__e;if(n){let i=n.U;if(i){n.U=void 0;for(let o in i){let f=i[o];f&&f.d()}}}e.__np=void 0}else{let n=e.__c;if(n){let i=n.__$u;i&&(n.__$u=void 0,i.d())}}t(e)});s("__h",(t,e,n,i)=>{(i<3||i===9)&&(e.__$f|=2),t(e,n,i)});F.prototype.shouldComponentUpdate=function(t,e){if(this.__R)return!0;let n=this.__$u,i=n&&n.s!==void 0;for(let o in e)return!0;if(this.__f||typeof this.u=="boolean"&&this.u===!0){let o=2&this.__$f;if(!(i||o||4&this.__$f)||1&this.__$f)return!0}else if(!(i||4&this.__$f)||3&this.__$f)return!0;for(let o in t)if(o!=="__source"&&t[o]!==this.props[o])return!0;for(let o in this.props)if(!(o in t))return!0;return!1};function C(t,e){return v(()=>A(t,e),[])}function I(t,e){let n=$(t);return n.current=t,h.__$f|=4,v(()=>m(()=>n.current(),e),[])}var R=typeof requestAnimationFrame>"u"?setTimeout:function(t){let e=()=>{clearTimeout(n),cancelAnimationFrame(i),t()},n=setTimeout(e,35),i=requestAnimationFrame(e)},O=t=>{queueMicrotask(()=>{queueMicrotask(t)})};function V(){S(()=>{let t;for(;t=k.shift();)y.call(t)})}function G(){k.push(this)===1&&(p.requestAnimationFrame||R)(V)}function L(){S(()=>{let t;for(;t=w.shift();)y.call(t)})}function T(){w.push(this)===1&&(p.requestAnimationFrame||O)(L)}function z(t,e){let n=$(t);n.current=t,b(()=>a(function(){return this.N=G,n.current()},e),[])}function B(t){let e=v(()=>t(),[]);return b(()=>e[Symbol.dispose],[e]),e}export{K as Signal,Q as action,W as batch,X as computed,Y as createModel,Z as effect,ee as signal,te as untracked,I as useComputed,B as useModel,C as useSignal,z as useSignalEffect};
//signals.mjs.map