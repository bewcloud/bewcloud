/* esm.sh - @jsr/std__path@1.1.4/_common/glob_to_reg_exp */
var d=["!","$","(",")","*","+",".","=","?","[","\\","^","{","|"],R=["-","\\","]"];function w(u,i,{extended:p=!0,globstar:A=!0,caseInsensitive:C=!1}={}){if(i==="")return/(?!)/;let r=i.length;for(;r>1&&u.seps.includes(i[r-1]);r--);i=i.slice(0,r);let a="";for(let h=0;h<i.length;){let n="",s=[],c=!1,l=!1,E=!1,e=h;for(;e<i.length&&!(u.seps.includes(i[e])&&s.length===0);e++){if(l){l=!1,n+=(c?R:d).includes(i[e])?`\\${i[e]}`:i[e];continue}if(i[e]===u.escapePrefix){l=!0;continue}if(i[e]==="[")if(c){if(i[e+1]===":"){let t=e+1,f="";for(;i[t+1]!==void 0&&i[t+1]!==":";)f+=i[t+1],t++;if(i[t+1]===":"&&i[t+2]==="]"){e=t+2,f==="alnum"?n+="\\dA-Za-z":f==="alpha"?n+="A-Za-z":f==="ascii"?n+="\0-\x7F":f==="blank"?n+="	 ":f==="cntrl"?n+="\0-\x7F":f==="digit"?n+="\\d":f==="graph"?n+="!-~":f==="lower"?n+="a-z":f==="print"?n+=" -~":f==="punct"?n+=`!"#$%&'()*+,\\-./:;<=>?@[\\\\\\]^_\u2018{|}~`:f==="space"?n+="\\s\v":f==="upper"?n+="A-Z":f==="word"?n+="\\w":f==="xdigit"&&(n+="\\dA-Fa-f");continue}}}else{c=!0,n+="[",i[e+1]==="!"?(e++,n+="^"):i[e+1]==="^"&&(e++,n+="\\^");continue}if(i[e]==="]"&&c){c=!1,n+="]";continue}if(c){n+=i[e];continue}if(i[e]===")"&&s.length>0&&s[s.length-1]!=="BRACE"){n+=")";let t=s.pop();t==="!"?n+=u.wildcard:t!=="@"&&(n+=t);continue}if(i[e]==="|"&&s.length>0&&s[s.length-1]!=="BRACE"){n+="|";continue}if(i[e]==="+"&&p&&i[e+1]==="("){e++,s.push("+"),n+="(?:";continue}if(i[e]==="@"&&p&&i[e+1]==="("){e++,s.push("@"),n+="(?:";continue}if(i[e]==="?"){p&&i[e+1]==="("?(e++,s.push("?"),n+="(?:"):n+=".";continue}if(i[e]==="!"&&p&&i[e+1]==="("){e++,s.push("!"),n+="(?!";continue}if(i[e]==="{"){s.push("BRACE"),n+="(?:";continue}if(i[e]==="}"&&s[s.length-1]==="BRACE"){s.pop(),n+=")";continue}if(i[e]===","&&s[s.length-1]==="BRACE"){n+="|";continue}if(i[e]==="*"){if(p&&i[e+1]==="(")e++,s.push("*"),n+="(?:";else{let t=i[e-1],f=1;for(;i[e+1]==="*";)e++,f++;let x=i[e+1];A&&f===2&&[...u.seps,void 0].includes(t)&&[...u.seps,void 0].includes(x)?(n+=u.globstar,E=!0):n+=u.wildcard}continue}n+=d.includes(i[e])?`\\${i[e]}`:i[e]}if(s.length>0||c||l){n="";for(let t of i.slice(h,e))n+=d.includes(t)?`\\${t}`:t,E=!1}for(a+=n,E||(a+=e<i.length?u.sep:u.sepMaybe,E=!0);u.seps.includes(i[e]);)e++;h=e}return a=`^${a}$`,new RegExp(a,C?"i":"")}export{w as _globToRegExp};
//glob_to_reg_exp.mjs.map